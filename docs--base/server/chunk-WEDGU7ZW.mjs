import './polyfills.server.mjs';
import{a as P}from"./chunk-6NNPOWQB.mjs";import{a as A,b as y,c as I,d as M,e as D,f as b,h as G,i as R,j as V,m as j}from"./chunk-26NXVID2.mjs";import"./chunk-JNO7ST2A.mjs";import{a as k}from"./chunk-FPWFO7V3.mjs";import"./chunk-KRHHTLWT.mjs";import{j as N}from"./chunk-LDSOU5NY.mjs";import{Gb as s,Ib as O,Nb as q,Qa as o,Qb as S,Y as E,aa as w,gb as c,ib as F,mb as p,qb as l,rb as n,sb as C,xb as x,yb as h}from"./chunk-ILMFCX3N.mjs";import"./chunk-VVCT4QZE.mjs";var T=(t,r)=>({"is-valid":t,"is-invalid":r});function $(t,r){t&1&&(l(0,"p",15),s(1,"details is required."),n())}function z(t,r){if(t&1&&(l(0,"div",6),c(1,$,2,0,"p",15),n()),t&2){let d,i=h();o(),p(1,(d=i.orderForm.get("details"))!=null&&d.getError("required")?1:-1)}}function B(t,r){t&1&&(l(0,"p",15),s(1,"phone is required."),n())}function H(t,r){t&1&&(l(0,"p",15),s(1,"phone is required."),n())}function J(t,r){if(t&1&&(l(0,"div",6),c(1,B,2,0,"p",15)(2,H,2,0),n()),t&2){let d,i=h();o(),p(1,(d=i.orderForm.get("phone"))!=null&&d.getError("required")?1:(d=i.orderForm.get("phone"))!=null&&d.getError("pattern")?2:-1)}}function K(t,r){t&1&&(l(0,"p",15),s(1,"city is required."),n())}function L(t,r){if(t&1&&(l(0,"div",6),c(1,K,2,0,"p",15),n()),t&2){let d,i=h();o(),p(1,(d=i.orderForm.get("city"))!=null&&d.getError("required")?1:-1)}}function Q(t,r){t&1&&C(0,"span",12)}function U(t,r){if(t&1&&(l(0,"p",13),s(1),n()),t&2){let d=h();o(),O(" ",d.messgsuc," ")}}function W(t,r){if(t&1&&(l(0,"p",14),s(1),n()),t&2){let d=h();o(),O(" ",d.messgerr," ")}}var oe=(()=>{let r=class r{constructor(){this._OrderService=E(P),this._ActivatedRoute=E(k),this.isloading=!1,this.orderForm=new D({details:new b(null,[y.required]),phone:new b(null,[y.required,y.pattern(/^01[125][0-9]{8}$/)]),city:new b(null,[y.required])})}ngOnInit(){this.unsub=this._ActivatedRoute.paramMap.subscribe({next:i=>{this.cartId=i.get("cartId")}})}orderFunc(){this.orderForm.valid?(this.isloading=!0,this._OrderService.orderapi(this.cartId,this.orderForm.value).subscribe({next:i=>{console.log(i),this.isloading=!1,this.messgsuc=i.status,i.status=="success"&&window.open(i.session.url,"_self")},error:i=>{console.log(i),this.messgerr=i.statusMsg}})):this.orderForm.markAllAsTouched()}ngOnDestroy(){this.unsub?.unsubscribe()}};r.\u0275fac=function(v){return new(v||r)},r.\u0275cmp=w({type:r,selectors:[["app-order"]],standalone:!0,features:[q],decls:24,vars:19,consts:[[1,"bg-custome","w-50","mx-auto","my-5","shadow","p-3","my-2","rounded-4"],[1,"h2","text-main","text-decoration-underline"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","details"],["id","details","type","text","formControlName","details",1,"form-control",3,"ngClass"],[1,"alert","alert-danger"],["for","phone"],["id","phone","type","tel","formControlName","phone",1,"form-control",3,"ngClass"],["for","city"],["id","city","type","text","formControlName","city",1,"form-control",3,"ngClass"],["type","submit",1,"btn-main","ms-auto","d-block",3,"click"],[1,"fas","fa-spin","fa-spinner"],[1,"text-center","alert","alert-success","w-50","mx-auto"],[1,"text-center","alert","alert-danger","w-50","mx-auto"],[1,"m-0"]],template:function(v,e){if(v&1&&(l(0,"section",0)(1,"h1",1),s(2," the order now online payment: "),n(),l(3,"form",2),x("ngSubmit",function(){return e.orderFunc()}),l(4,"div",3)(5,"label",4),s(6,"details"),n(),C(7,"input",5),c(8,z,2,1,"div",6),n(),l(9,"div",3)(10,"label",7),s(11,"phone"),n(),C(12,"input",8),c(13,J,3,1,"div",6),n(),l(14,"div",3)(15,"label",9),s(16,"city"),n(),C(17,"input",10),c(18,L,2,1,"div",6),n(),l(19,"button",11),x("click",function(){return e.orderFunc()}),s(20," order now "),c(21,Q,1,0,"span",12),n()(),c(22,U,2,1,"p",13)(23,W,2,1,"p",14),n()),v&2){let a,_,m,g,u,f;o(3),F("formGroup",e.orderForm),o(4),F("ngClass",S(10,T,!((a=e.orderForm.get("details"))!=null&&a.errors)&&(((a=e.orderForm.get("details"))==null?null:a.touched)||((a=e.orderForm.get("details"))==null?null:a.dirty)),((a=e.orderForm.get("details"))==null?null:a.errors)&&(((a=e.orderForm.get("details"))==null?null:a.touched)||((a=e.orderForm.get("details"))==null?null:a.dirty)))),o(),p(8,(_=e.orderForm.get("details"))!=null&&_.errors&&((_=e.orderForm.get("details"))!=null&&_.touched||(_=e.orderForm.get("details"))!=null&&_.dirty)?8:-1),o(4),F("ngClass",S(13,T,!((m=e.orderForm.get("phone"))!=null&&m.errors)&&(((m=e.orderForm.get("phone"))==null?null:m.touched)||((m=e.orderForm.get("phone"))==null?null:m.dirty)),((m=e.orderForm.get("phone"))==null?null:m.errors)&&(((m=e.orderForm.get("phone"))==null?null:m.touched)||((m=e.orderForm.get("phone"))==null?null:m.dirty)))),o(),p(13,(g=e.orderForm.get("phone"))!=null&&g.errors&&((g=e.orderForm.get("phone"))!=null&&g.touched||(g=e.orderForm.get("phone"))!=null&&g.dirty)?13:-1),o(4),F("ngClass",S(16,T,!((u=e.orderForm.get("city"))!=null&&u.errors)&&(((u=e.orderForm.get("city"))==null?null:u.touched)||((u=e.orderForm.get("city"))==null?null:u.dirty)),((u=e.orderForm.get("city"))==null?null:u.errors)&&(((u=e.orderForm.get("city"))==null?null:u.touched)||((u=e.orderForm.get("city"))==null?null:u.dirty)))),o(),p(18,(f=e.orderForm.get("city"))!=null&&f.errors&&((f=e.orderForm.get("city"))!=null&&f.touched||(f=e.orderForm.get("city"))!=null&&f.dirty)?18:-1),o(3),p(21,e.isloading?21:-1),o(),p(22,e.messgsuc?22:-1),o(),p(23,e.messgerr?23:-1)}},dependencies:[j,G,A,I,M,R,V,N],styles:[".bg-custome[_ngcontent-%COMP%]{background-color:#dbd4cc}"]});let t=r;return t})();export{oe as OrderComponent};
