import './polyfills.server.mjs';
import{a as B}from"./chunk-2EWELVR6.mjs";import{a as N,b as f,c as k,d as A,h as q,i as D,j as R,k as G,m as M}from"./chunk-26NXVID2.mjs";import"./chunk-JNO7ST2A.mjs";import{d as L,e as F}from"./chunk-FPWFO7V3.mjs";import"./chunk-KRHHTLWT.mjs";import{j as T}from"./chunk-LDSOU5NY.mjs";import{Gb as u,Ib as S,Nb as b,Qa as s,Qb as x,Y as C,aa as y,gb as g,ib as v,mb as d,qb as l,rb as i,sb as w,xb as E,yb as _}from"./chunk-ILMFCX3N.mjs";import"./chunk-VVCT4QZE.mjs";var I=(e,n)=>({"is-valid":e,"is-invalid":n});function V(e,n){e&1&&(l(0,"p",15),u(1,"email is required."),i())}function O(e,n){e&1&&(l(0,"p",15),u(1,"enter valid email."),i())}function j(e,n){if(e&1&&(l(0,"div",6),g(1,V,2,0,"p",15)(2,O,2,0),i()),e&2){let r,o=_();s(),d(1,(r=o.login.get("email"))!=null&&r.getError("required")?1:(r=o.login.get("email"))!=null&&r.getError("email")?2:-1)}}function P(e,n){e&1&&(l(0,"p",15),u(1,"password is required."),i())}function $(e,n){e&1&&(l(0,"p",15),u(1,"enter valid password."),i())}function z(e,n){if(e&1&&(l(0,"div",6),g(1,P,2,0,"p",15)(2,$,2,0),i()),e&2){let r,o=_();s(),d(1,(r=o.login.get("password"))!=null&&r.getError("required")?1:(r=o.login.get("password"))!=null&&r.getError("pattern")?2:-1)}}function H(e,n){e&1&&w(0,"span",10)}function J(e,n){if(e&1&&(l(0,"p",13),u(1),i()),e&2){let r=_();s(),S(" ",r.messgerror," ")}}function K(e,n){if(e&1&&(l(0,"p",14),u(1),i()),e&2){let r=_();s(),S(" ",r.messsuccess," ")}}var ne=(()=>{let n=class n{constructor(){this._AuthService=C(B),this._FormBuilder=C(G),this._Router=C(L),this.messgerror="",this.messsuccess="",this.isloading=!1,this.login=this._FormBuilder.group({email:[null,[f.required,f.email]],password:[null,[f.required,f.pattern(/^\w{6,}$/)]]})}loginfunction(){this.login.valid?(this.isloading=!0,this.unsub=this._AuthService.setloginform(this.login.value).subscribe({next:o=>{this.isloading=!1,console.log(o),this.messgerror="",this.messsuccess=o.message,localStorage.setItem("token",o.token),this._AuthService.decodetoken(),o.message=="success"&&setTimeout(()=>{this._Router.navigate(["/home"])},1e3)},error:o=>{this.isloading=!1,console.log(o),this.messsuccess="",this.messgerror=o.error.message}})):this.login.markAllAsTouched()}ngOnDestroy(){this.unsub?.unsubscribe()}};n.\u0275fac=function(h){return new(h||n)},n.\u0275cmp=y({type:n,selectors:[["app-login"]],standalone:!0,features:[b],decls:22,vars:14,consts:[[1,"bg-custome","shadow","p-3","my-2","rounded-4"],[1,"h2","text-main","text-decoration-underline"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["id","email","type","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger"],["for","password"],["id","password","type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","submit",1,"btn-main","ms-auto","d-block"],[1,"fas","fa-spin","fa-spinner"],[1,"text-center"],["routerLink","/forget",1,"text-primary","text-decoration-underline"],[1,"text-center","alert","alert-danger","w-50","mx-auto"],[1,"text-center","alert","alert-success","w-50","mx-auto"],[1,"m-0"]],template:function(h,t){if(h&1&&(l(0,"section",0)(1,"h1",1),u(2,"login Now"),i(),l(3,"form",2),E("ngSubmit",function(){return t.loginfunction()}),l(4,"div",3)(5,"label",4),u(6,"email"),i(),w(7,"input",5),g(8,j,3,1,"div",6),i(),l(9,"div",3)(10,"label",7),u(11,"password"),i(),w(12,"input",8),g(13,z,3,1,"div",6),i(),l(14,"button",9),u(15," login "),g(16,H,1,0,"span",10),i(),l(17,"p",11)(18,"a",12),u(19,"forgetpasswoed?"),i()(),g(20,J,2,1,"p",13)(21,K,2,1,"p",14),i()()),h&2){let a,p,m,c;s(3),v("formGroup",t.login),s(4),v("ngClass",x(8,I,!((a=t.login.get("email"))!=null&&a.errors)&&(((a=t.login.get("email"))==null?null:a.touched)||((a=t.login.get("email"))==null?null:a.dirty)),((a=t.login.get("email"))==null?null:a.errors)&&(((a=t.login.get("email"))==null?null:a.touched)||((a=t.login.get("email"))==null?null:a.dirty)))),s(),d(8,(p=t.login.get("email"))!=null&&p.errors&&((p=t.login.get("email"))!=null&&p.touched||(p=t.login.get("email"))!=null&&p.dirty)?8:-1),s(4),v("ngClass",x(11,I,!((m=t.login.get("password"))!=null&&m.errors)&&(((m=t.login.get("password"))==null?null:m.touched)||((m=t.login.get("password"))==null?null:m.dirty)),((m=t.login.get("password"))==null?null:m.errors)&&(((m=t.login.get("password"))==null?null:m.touched)||((m=t.login.get("password"))==null?null:m.dirty)))),s(),d(13,(c=t.login.get("password"))!=null&&c.errors&&((c=t.login.get("password"))!=null&&c.touched||(c=t.login.get("password"))!=null&&c.dirty)?13:-1),s(3),d(16,t.isloading?16:-1),s(4),d(20,t.messgerror?20:-1),s(),d(21,t.messsuccess?21:-1)}},dependencies:[M,q,N,k,A,D,R,T,F],styles:[".bg-custome[_ngcontent-%COMP%]{background-color:#dbd4cc}"]});let e=n;return e})();export{ne as LoginComponent};
